setwd("C:/R/daly_model/prog/")
colnames <- c("Factor","Dis","Region","DALY","Y","GDPCAP","PoU","GINI")
colnamesout <- c("Factor","Dis","Intercept","Y","adjR2")
factor.names <- c("Underweight","Iron deficiency","Vitamin A deficiency","Zinc deficiency")
#factor.names <- c("Underweight")
factor.in <- factor.names
pdata <- read.table("../data/dalymodeldata.txt")
names(pdata) <- colnames
out <- NULL
for(k in 1:length(factor.in)){
if (factor.in[k]=="Underweight"){
dis.names <- c("Diarrhoeal diseases","Pertussis","Measles","Tetanus","Meningitis","Malaria","Lower respiratory infections","Birth asphyxia and birth trauma","Protein-energy malnutrition","all")
# 		dis.names <- c("all")
} else if (factor.in[k]=="Iron deficiency"){
dis.names <- c("Iron-deficiency anaemia","Maternal conditions","all")
} else if (factor.in[k]=="Vitamin A deficiency"){
dis.names <- c("Diarrhoeal diseases","Measles","Vitamin A deficiency","all")
} else if (factor.in[k]=="Zinc deficiency"){
dis.names <- c("Diarrhoeal diseases","Malaria","Lower respiratory infections","all")
setwd("C:/subversion_CGE/AIM_CGErev312/prog/individual/daly_model/prog/")
colnames <- c("Factor","Dis","Region","DALY","Y","GDPCAP","PoU","GINI")
colnamesout <- c("Factor","Dis","Intercept","Y","adjR2")
factor.names <- c("Underweight","Iron deficiency","Vitamin A deficiency","Zinc deficiency")
#factor.names <- c("Underweight")
factor.in <- factor.names
pdata <- read.table("../data/dalymodeldata.txt")
names(pdata) <- colnames
out <- NULL
for(k in 1:length(factor.in)){
if (factor.in[k]=="Underweight"){
dis.names <- c("Diarrhoeal diseases","Pertussis","Measles","Tetanus","Meningitis","Malaria","Lower respiratory infections","Birth asphyxia and birth trauma","Protein-energy malnutrition","all")
# 		dis.names <- c("all")
} else if (factor.in[k]=="Iron deficiency"){
dis.names <- c("Iron-deficiency anaemia","Maternal conditions","all")
} else if (factor.in[k]=="Vitamin A deficiency"){
dis.names <- c("Diarrhoeal diseases","Measles","Vitamin A deficiency","all")
} else if (factor.in[k]=="Zinc deficiency"){
dis.names <- c("Diarrhoeal diseases","Malaria","Lower respiratory infections","all")
} else {
}
dis.names <- c("all")
dis.in <- dis.names
for(j in 1:length(dis.in)){
factorname <- factor.in[k]
disname <- dis.in[j]
y<- pdata[pdata$Factor==factorname & pdata$Dis==disname ,c(-1,-2)]
names(y) <- c("Region","DALY","Y","GDPCAP","PoU","GINI")
y<- pdata[pdata$Factor==factorname & pdata$Dis==disname ,c(-1,-2)]
names(y) <- c("Region","DALY","Y","GDPCAP","PoU","GINI")
#  result <- summary (lm(log(DALY) ~ Y, data=y))
result0 <- lm(log(DALY) ~ log(Y), data=y)
sum <- summary (result0)
out <- cbind (out,factor.in[k],dis.in[j])
out <- cbind (out,sum$coefficients["(Intercept)","Estimate"])
out <- cbind (out,sum$coefficients["Y","Estimate"])
out <- cbind (out,sum$adj.r.squared)
#Output result
filename <- paste('../output/tmp/',factor.in[k],'_',dis.in[j],'.txt', sep = '')
write(out,file=filename,ncolumns=5)
#Make figure
filename2 <- paste('../output/fig/',factor.in[k],'_',dis.in[j],'_Y.png', sep = '')
mainlabel <- c(factor.in[k],dis.in[j])
adjR2 <- sprintf("%1.3f",sum$adj.r.squared)
text <- paste('adj.R2=',adjR2)
png(filename=filename2, width=300, height=350)
plot(y$Y,log(y$DALY),main=mainlabel)
abline(sum$coefficients["(Intercept)","Estimate"],sum$coefficients["Y","Estimate"])
mtext(text)
}}
names(out) <- colnamesout
write(out,file="../output/dalymodelouttmp.txt",ncolumns=5,sep=",")
out <- cbind (out,factor.in[k],dis.in[j])
dis.names <- c("Diarrhoeal diseases","Pertussis","Measles","Tetanus","Meningitis","Malaria","Lower respiratory infections","Birth asphyxia and birth trauma","Protein-energy malnutrition","all")
# 		dis.names <- c("all")
} else if (factor.in[k]=="Iron deficiency"){
dis.names <- c("Iron-deficiency anaemia","Maternal conditions","all")
} else if (factor.in[k]=="Vitamin A deficiency"){
dis.names <- c("Diarrhoeal diseases","Measles","Vitamin A deficiency","all")
} else if (factor.in[k]=="Zinc deficiency"){
dis.names <- c("Diarrhoeal diseases","Malaria","Lower respiratory infections","all")
} else {
}
dis.names <- c("all")
dis.in <- dis.names
for(j in 1:length(dis.in)){
factorname <- factor.in[k]
disname <- dis.in[j]
y<- pdata[pdata$Factor==factorname & pdata$Dis==disname ,c(-1,-2)]
names(y) <- c("Region","DALY","Y","GDPCAP","PoU","GINI")
#  result <- summary (lm(log(DALY) ~ Y, data=y))
result0 <- lm(log(DALY) ~ log(Y), data=y)
sum <- summary (result0)
out <- cbind (out,factor.in[k],dis.in[j])
out <- cbind (out,sum$coefficients["(Intercept)","Estimate"])
out <- cbind (out,sum$coefficients["log(Y)","Estimate"])
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:100)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=X1, y=X2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=X1, y=X2, fill=value))
p +    geom_raster()
View(dat2)
View(dat2)
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- c("X1","X2","Value")
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=X1, y=X2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:1000)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=X1, y=X2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:1000)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Ver1, y=Ver2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:1000)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:1000)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:1000)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
View(dat)
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:5)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
View(dat)
View(dat)
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
View(dat2)
View(dat)
View(dat2)
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "Var1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:100)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
View(dat)
View(dat)
View(dat2)
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:100)
#dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:100)
#dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
names(dat) <- paste("X", 1:100)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:100)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:100)
#dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/R/map/prog")
library(ggplot2)
library(plyr)
library(reshape2)
dat <- matrix(rnorm(1000, 3, 1), ncol=100)
#names(dat) <- paste("X", 1:100)
dat2 <- melt(dat, id.var = "X1")
p <- ggplot(dat2, aes(x=Var1, y=Var2, fill=value))
p +    geom_raster()
getwd()
getwd()
setwd(getwd())
setwd("C:/_LandUseModel/prog/R/prog")
library(ggplot2)
library(plyr)
library(reshape2)
colnames <- c("Variable","X1","X2","Value")
porg <- read.table("../../../output/JPN2010.txt")
names(porg) <- colnames
#landin <- unique(porg$Variable)
#land.names <- c("PDR")
#land.in <-  land.names
landin <-  c("PDR")
for(i in (1:length(landin))){
#	landname <- paste(landin[i])
#pdata <- porg[porg$Variable==landname, c(-1)]
pdata <- cbind(subset(porg,Variable==landin[i]))
#names(pdata) <- paste("row","Variable","X1","X2","Value")
outname <- paste('../../../output/plot/JAN2010_',landin[i],'.png', sep = '')
png(filename=outname, width=730, height=600, res=150)
ggplot(pdata, aes(x=X2, y=X1, fill=Value)) + geom_raster() + ylim(135,85) + ggtitle("rice") + scale_fill_gradient(low="grey", high="blue")
dev.off()
}
View(porg)
View(porg)
View(pdata)
View(pdata)
getwd()
getwd()
setwd(getwd())
library(ggplot2)
setwd("C:/_LandUseModel/prog/R/prog")
library(plyr)
library(reshape2)
colnames <- c("Variable","X1","X2","Value")
porg <- read.table("../../../output/JPN2010.txt")
names(porg) <- colnames
#landin <- unique(porg$Variable)
#land.names <- c("PDR")
#land.in <-  land.names
landin <-  c("PDR")
for(i in (1:length(landin))){
#	landname <- paste(landin[i])
#pdata <- porg[porg$Variable==landname, c(-1)]
pdata0 <- cbind(subset(porg,Variable==landin[i]))
pdata <- pdata0[c(-1)]
#names(pdata) <- paste("row","Variable","X1","X2","Value")
outname <- paste('../../../output/plot/JAN2010_',landin[i],'.png', sep = '')
png(filename=outname, width=730, height=600, res=150)
ggplot(pdata, aes(x=X2, y=X1, fill=Value)) + geom_raster() + ylim(135,85) + ggtitle("rice") + scale_fill_gradient(low="grey", high="blue")
dev.off()
}
View(pdata0)
View(pdata)
View(pdata0)
View(pdata)
View(porg)
for(i in (1:length(landin))){
#	landname <- paste(landin[i])
#pdata <- porg[porg$Variable==landname, c(-1)]
pdata0 <- cbind(subset(porg,Variable==landin[i]))
pdata <- pdata0[c(-0)]
#names(pdata) <- paste("row","Variable","X1","X2","Value")
outname <- paste('../../../output/plot/JAN2010_',landin[i],'.png', sep = '')
png(filename=outname, width=730, height=600, res=150)
ggplot(pdata, aes(x=X2, y=X1, fill=Value)) + geom_raster() + ylim(135,85) + ggtitle("rice") + scale_fill_gradient(low="grey", high="blue")
dev.off()
}
View(pdata0)
View(pdata0)
View(pdata)
View(pdata)
View(pdata)
View(pdata)
